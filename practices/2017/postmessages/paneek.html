<!DOCTYPE html>
<html>
<title>HTML Tutorial</title>

<style>
	
	.column {
		width: 49%;
		display: inline-block;
		vertical-align: top;
	}	
</style>

<script
  src="https://code.jquery.com/jquery-2.2.4.min.js"
  integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
  crossorigin="anonymous"></script>

<script>
	var origin = undefined;

	$( document ).ready(function() {

		$('#connetToPaneek').on('click',function(){
			
			var domain = 'https://hidden-escarpment-3694.herokuapp.com';
			var iframe = document.getElementById('myIframe').contentWindow;

			var message = 'Hello!  The time is: ' + (new Date().getTime());
			iframe.postMessage(message,domain); //send the message and target URI		

		});


		window.addEventListener('message',function(event) {
			
			if(event.origin === 'https://hidden-escarpment-3694.herokuapp.com') {
				var paneekEvent = JSON.parse(event.data);

				jQuery('#eventsList').append('<li>' + paneekEvent.eventName + '</li>');				
				
			}				

		},false);
	   
		

	});


	
</script>

<body>


<h1>Post message: Parent iframe</h1>

<iframe id="myIframe" src="https://hidden-escarpment-3694.herokuapp.com/#/tour/view/100" frameborder="0" style="height: 400px;width:100%;border:1px solid red;"></iframe>

<div class="column">
	<button id="connetToPaneek">
		Connect to Panek
	</button>
	
	<label>Events</label>
	<ul id="eventsList">	
	</ul>	
</div>

<div class="column"> 
	<h5>Info from Paneek</h5>
</div>


</body>
</html>